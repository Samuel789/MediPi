{% extends 'medication/patient_template.djt.html' %}
{% load display_utils %}

{% block main-pane %}
<div class="title">
<h3>Patient Medications: {{ active_patient.name }}</h3>
    </div>
<div class="container">

    {% if active_patient.schedules|length > 0 %}

  <table class="table table-hover">
    <thead>
      <tr>
        <th>Medication</th>
        <th>Full Name</th>
          <th>Last 7 Days</th>
          <th>Streak</th>
        <th>Alternate Name</th>
          <th>Actions</th>
      </tr>
    </thead>
    <tbody>

    {% for schedule in active_patient.schedules %}
      <tr>
        <td>{{ schedule.medication.short_name }}</td>
        <td>{{ schedule.medication.full_name }}</td>
        <td>{{ schedule.adherence.seven_day_fraction|as_percentage }}</td>
        <td>{{ schedule.adherence.streak_length }}</td>
          <td>{% if schedule.alternate_name is None %}<i>None</i>{% else %}{{ schedule.alternate_name }}{% endif %}</td>
          <td><a class="btn btn-default" href="{{ siteurl }}/patients/modifyschedule?schedule_id={{ schedule.id }}">View</a></td>
      </tr>
    {% endfor %}

    </tbody>
  </table>
{% else %}
    <div class="alert alert-info">
  <strong>Info!</strong> No medications have been assigned to this patient. Click the Add Medication button to assign a new medication.
</div>

    {% endif %}
<a class="button btn btn-primary" href="{{ site_url }}/patients/assignmedication?patient_uuid={{ active_patient.uuid }}">Add Medication</a>

</div>

{% endblock %}